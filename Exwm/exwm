### Jeśli używasz lightdm lub gdm:
Utwórz plik emacs.desktop w /usr/share/xsessions/:

# emacs.desktop

[Desktop Entry]
Name=EXWM
Comment=Emacs Window Manager
Exec=emacs
Type=Application 

###  Wymagania:
# rofi
# i3lock, slock, xlock lub inny program blokujący ekran
# systemd (systemctl) – domyślnie dostępne w większości dystrybucji

### Utwórz plik ~/.config/exwm/powermenu.sh z poniższą zawartością: 
###  Upewnij się, że skrypt jest wykonywalny:
chmod +x ~/.config/exwm/powermenu.sh 

#!/bin/bash

choice=$(printf "🔒 Zablokuj\n🕹️ Wyloguj\n🔁 Restart\n⏻ Wyłącz\n❌ Anuluj" | rofi -dmenu -p "Co chcesz zrobić?" -i)

case "$choice" in
  "🔒 Zablokuj") i3lock ;;  # Lub xlock, slock – co masz zainstalowane
  "🕹️ Wyloguj") emacsclient -e "(save-buffers-kill-emacs)" ;;
  "🔁 Restart") systemctl reboot ;;
  "⏻ Wyłącz") systemctl poweroff ;;
  *) exit 0 ;;
esac
